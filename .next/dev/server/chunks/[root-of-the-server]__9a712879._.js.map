{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Downloads/nexa-ai-code-review/app/api/review/route.ts"],"sourcesContent":["import { type NextRequest, NextResponse } from \"next/server\"\n\nexport async function POST(request: NextRequest) {\n  try {\n    const { code, language, mode } = await request.json()\n\n    if (!code || !language) {\n      return NextResponse.json({ error: \"Missing code or language\" }, { status: 400 })\n    }\n\n    // Mock AI review response - replace with real API call\n    const mockReview = generateMockReview(code, language)\n\n    return NextResponse.json(mockReview)\n  } catch (error) {\n    console.error(\"[/api/review]\", error)\n    return NextResponse.json({ error: \"Failed to process review\" }, { status: 500 })\n  }\n}\n\nfunction generateMockReview(code: string, language: string) {\n  const codeLines = code.split(\"\\n\")\n  const issues = []\n  const suggestions: string[] = []\n\n  // Simple heuristic checks\n  if (code.includes(\"var \")) {\n    issues.push({\n      type: \"Style\",\n      severity: \"low\",\n      message: \"Consider using `const` or `let` instead of `var` for better scoping.\",\n      line: codeLines.findIndex((l) => l.includes(\"var \")),\n    })\n    suggestions.push(\"Use `const` or `let` instead of `var` for better variable scoping and to avoid hoisting issues.\")\n  }\n\n  if (code.includes(\"console.log\") && language === \"javascript\") {\n    issues.push({\n      type: \"Debug\",\n      severity: \"low\",\n      message: \"Remove console.log statements before production.\",\n      line: codeLines.findIndex((l) => l.includes(\"console.log\")),\n    })\n  }\n\n  if (code.includes(\"==\")) {\n    issues.push({\n      type: \"Bug Risk\",\n      severity: \"medium\",\n      message: \"Avoid using `==` for comparison. Use `===` instead.\",\n      line: codeLines.findIndex((l) => l.includes(\"==\")),\n    })\n    suggestions.push(\"Replace loose equality (`==`) with strict equality (`===`) to avoid type coercion bugs.\")\n  }\n\n  if (code.length < 50) {\n    suggestions.push(\"Code is very short. Consider testing with more complex code to get detailed insights.\")\n  }\n\n  // Generate improved code by replacing detected patterns\n  let improvedCode = code\n  improvedCode = improvedCode.replace(/\\bvar\\b/g, \"const\")\n  improvedCode = improvedCode.replace(/==/g, \"===\")\n  improvedCode = improvedCode.replace(/console\\.log$$(.*?)$$;?/g, \"// Removed: console.log($1)\")\n\n  return {\n    issues: issues.length > 0 ? issues : [{ type: \"Info\", severity: \"low\", message: \"Code looks good!\" }],\n    suggestions:\n      suggestions.length > 0\n        ? suggestions.join(\" \")\n        : \"Your code is well-written! Consider adding more complex patterns for detailed suggestions.\",\n    improved_code: improvedCode,\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,GAAG,MAAM,QAAQ,IAAI;QAEnD,IAAI,CAAC,QAAQ,CAAC,UAAU;YACtB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA2B,GAAG;gBAAE,QAAQ;YAAI;QAChF;QAEA,uDAAuD;QACvD,MAAM,aAAa,mBAAmB,MAAM;QAE5C,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iBAAiB;QAC/B,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA2B,GAAG;YAAE,QAAQ;QAAI;IAChF;AACF;AAEA,SAAS,mBAAmB,IAAY,EAAE,QAAgB;IACxD,MAAM,YAAY,KAAK,KAAK,CAAC;IAC7B,MAAM,SAAS,EAAE;IACjB,MAAM,cAAwB,EAAE;IAEhC,0BAA0B;IAC1B,IAAI,KAAK,QAAQ,CAAC,SAAS;QACzB,OAAO,IAAI,CAAC;YACV,MAAM;YACN,UAAU;YACV,SAAS;YACT,MAAM,UAAU,SAAS,CAAC,CAAC,IAAM,EAAE,QAAQ,CAAC;QAC9C;QACA,YAAY,IAAI,CAAC;IACnB;IAEA,IAAI,KAAK,QAAQ,CAAC,kBAAkB,aAAa,cAAc;QAC7D,OAAO,IAAI,CAAC;YACV,MAAM;YACN,UAAU;YACV,SAAS;YACT,MAAM,UAAU,SAAS,CAAC,CAAC,IAAM,EAAE,QAAQ,CAAC;QAC9C;IACF;IAEA,IAAI,KAAK,QAAQ,CAAC,OAAO;QACvB,OAAO,IAAI,CAAC;YACV,MAAM;YACN,UAAU;YACV,SAAS;YACT,MAAM,UAAU,SAAS,CAAC,CAAC,IAAM,EAAE,QAAQ,CAAC;QAC9C;QACA,YAAY,IAAI,CAAC;IACnB;IAEA,IAAI,KAAK,MAAM,GAAG,IAAI;QACpB,YAAY,IAAI,CAAC;IACnB;IAEA,wDAAwD;IACxD,IAAI,eAAe;IACnB,eAAe,aAAa,OAAO,CAAC,YAAY;IAChD,eAAe,aAAa,OAAO,CAAC,OAAO;IAC3C,eAAe,aAAa,OAAO,CAAC,4BAA4B;IAEhE,OAAO;QACL,QAAQ,OAAO,MAAM,GAAG,IAAI,SAAS;YAAC;gBAAE,MAAM;gBAAQ,UAAU;gBAAO,SAAS;YAAmB;SAAE;QACrG,aACE,YAAY,MAAM,GAAG,IACjB,YAAY,IAAI,CAAC,OACjB;QACN,eAAe;IACjB;AACF"}}]
}